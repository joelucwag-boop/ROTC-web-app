{% extends "base.html" %}
{% block content %}
<h2>Weekly Report</h2>

{% for it in items %}
  <div class="card" style="margin-bottom:1rem">
    <h3>{{ it.date }}</h3>
    {% if it.message %}
      <p class="muted">{{ it.message }}</p>
    {% endif %}
    {% if it.rows %}
      {% for ms in ['1','2','3','4','5'] %}
        {% set group = it.rows.get(ms, []) %}
        <details style="margin-bottom:0.5rem">
          <summary><strong>MS{{ ms }}</strong> — {{ group|length }} entries</summary>
          {% if group %}
            <ul>
              {% for r in group %}
                <li>{{ r.name }} — {{ r.status or '—' }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <p>No rows.</p>
          {% endif %}
        </details>
      {% endfor %}
    {% else %}
      <p>No data for this day.</p>
    {% endif %}
  </div>
{% endfor %}
{% endblock %}

{% endblock %}
